bundle:
  name: bds-qa-bundle

resources:
  jobs:
    inference_job:
      name: ${bundle.target}_inference_job
      job_clusters:
        - job_cluster_key: DBX-BDS-QA-BUNDLE-CLUSTER
          new_cluster:
            num_workers: 1
            spark_version: 14.3.x-scala2.12
            node_type_id: Standard_DS3_v2
      tasks:
        - task_key: Extract
          job_cluster_key: DBX-BDS-QA-BUNDLE-CLUSTER
          notebook_task:
            notebook_path: ./src/main/extract.py

        - task_key: Transform
          job_cluster_key: DBX-BDS-QA-BUNDLE-CLUSTER
          notebook_task:
            notebook_path: ./src/main/transform.py
          depends_on:
            - task_key: Extract
          run_if: ALL_SUCCESS

        - task_key: Load
          job_cluster_key: DBX-BDS-QA-BUNDLE-CLUSTER
          notebook_task:
            notebook_path: ./src/main/load.py
          depends_on:
            - task_key: Transform
          run_if: ALL_SUCCESS

targets:
  dev:
    default: true
